<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>PR09</title><meta name="description" content="Documentation for PR09"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">PR09</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>PR09</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#informe" id="informe" style="color: inherit; text-decoration: none;">
  <h1>Informe</h1>
</a>
<p>En está práctica pondremos en prácticas los conceptos aprendidos en las clases de teoría sobre las APIs síncronas de NODE.js.</p>
<p>Se ha pedido realizar una aplicación para almacenar listados de Funko Pops de una colección de usuarios. Contamos con un directorio &#39;database&#39; en la raíz en el cual se encuentran alojados los directorios de cada usuario registrado en la aplicacion y dentro de cada uno de estos directorios se encuentra un conjunto de ficheros con extensión .json, y en estos se recogen los siguientes datos para cada funko:</p>
<ol>
<li>ID (ha de ser único)</li>
<li>Nombre</li>
<li>Descripcion</li>
<li>Tipo</li>
<li>Género</li>
<li>Franquicia</li>
<li>Número de franquicia</li>
<li>Exclusividad</li>
<li>Características especiales</li>
<li>Precio</li>
</ol>

<a href="#índice" id="índice" style="color: inherit; text-decoration: none;">
  <h2><strong>Índice</strong></h2>
</a>
<ol>
<li><a href="#1-aspectos-a-tener-en-cuenta">Aspectos a tener en cuenta</a></li>
<li><a href="#2-soluci%C3%B3n-propuesta">Solución propuesta</a></li>
<li><a href="#3ejemplo-de-uso-de-la-aplicaci%C3%B3n">Ejemplo de uso de la aplicación</a></li>
<li><a href="#4dificultadesreflexi%C3%B3n">Dificultades/Reflexión.</a></li>
<li><a href="#5referencias">Referencias.</a></li>
</ol>

<a href="#1-aspectos-a-tener-en-cuenta" id="1-aspectos-a-tener-en-cuenta" style="color: inherit; text-decoration: none;">
  <h2><strong>1. Aspectos a tener en cuenta:</strong></h2>
</a>

<a href="#compilación-y-ejecución" id="compilación-y-ejecución" style="color: inherit; text-decoration: none;">
  <h3>Compilación y ejecución</h3>
</a>
<p>  En caso de que se desee ejecutar la aplicación se facilitan a continuación los comandos necesarios para ello.</p>
<pre><code class="language-console"><span class="hl-0">$npm</span><span class="hl-1"> run start </span><br/><br/><span class="hl-1">-- </span><span class="hl-2">Utilice</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">atajo</span><span class="hl-1"> </span><span class="hl-2">Ctrl+C</span><span class="hl-1"> </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">cancelar</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">compilación</span><br/><span class="hl-1">-- </span><span class="hl-2">Utilice</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">atajo</span><span class="hl-1"> </span><span class="hl-2">Ctrl+L</span><span class="hl-1"> </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">limpiar</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">terminal</span><br/><br/><span class="hl-1">-- </span><span class="hl-2">Alojado</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">directorio</span><span class="hl-1"> </span><span class="hl-2">raiz</span><span class="hl-1"> </span><span class="hl-2">ejecute:</span><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js (con </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">parametros</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">crea</span><span class="hl-1"> </span><span class="hl-2">correspondiente</span><span class="hl-1">)</span>
</code></pre>
<p>  En caso de desconocer alguno de los parametros que se requieren para el correcto uso de la aplicacion ejecute haga uso del <strong>--help</strong> para obtener información sobre cada comando</p>

<a href="#coexistencia-esm-y-commonjs" id="coexistencia-esm-y-commonjs" style="color: inherit; text-decoration: none;">
  <h3>Coexistencia ESM y CommonJS</h3>
</a>
<p>  Como se comentó en clase hay diversas incompatibilidades entre los módulos ESM y CommonJS. Para solventar cualquier este tipo de problemas opte por dejar todos los ficheros de configuración tal y como estaban en las entregas anteriores e instalar la <em>versión 4.1.2</em> de chalk.</p>

<a href="#2-solución-propuesta" id="2-solución-propuesta" style="color: inherit; text-decoration: none;">
  <h2><strong>2. Solución propuesta</strong>:</h2>
</a>
<p>Se realizará la explicación de la aplicación con un orden cronoógico en función de como se fueron desarrollando los programas y las estructuras.</p>
<p>En primer lugar, se desarrolló la clase Funko en la cual se recogen todos los atributos de cada funko y un único método publico que devuelve un objeto en formato json con estos atributos.</p>
<p>He de mencionar que en la primera versión de esta clase habían más métodos, concretamente un getter y un setter para cada atributo. SIn embargo, no se estaban utilizando y además los <em>get</em> y <em>set</em> daban problemas de incompatibilidad con los módulos ESM. En particular los setters se obivaron por que la clase no se esta modificando una vez se crea y en cuanto a los getters como solamente se estaba accediendo al <em>id</em> y al <em>nombre</em> del funko para realizar comprobaciones tales como que no existan ids repetidos en la base de datos de un usuario se modifico el atributo para dejar de ser privado y ser <em>public readonly</em>.</p>
<p>Además, mencionar que en un primer momento se desarrollaron las clases <em>FunkoColecction</em> donde se almacenaba una colección de funkos, así como la clase usuario donde en un principio estarían las funciones de manejo del usuario. Sin embargo se borraron ya que eran innecesarias al poder realizar todo mediante APIs sincronas de NODE.js.</p>
<p>En segundo lugar, se fueron desarrollando los comandos con los que interactuará el usuario para poder modificar y acceder a su base de datos con colecciones de funkos.</p>
<p>Antes de comenzar con los comandos, explicar que para cada uno de ellos hay un parametor obligatorio el cual es <em>--user</em> el cual introduce que usuario se esta &quot;conectando&quot; y a que base de datos se esta accediendo, si este no es un usuario registrado, es decir, no esta creado en la base de datos, se crea su correspondiente directorio.</p>
<p>A continuación se adjuntan varias funciones que se utilizarán posteriormente para realizar tareas como; </p>
<ul>
<li>Comprobar si existe un directorio para el usuario que se pasa como parametro a las funciones</li>
<li>Devolver un array con los ids de la colección de un usuario</li>
<li>Obtener una string con el valor del mercado del funko</li>
</ul>
<pre><code class="language-ts"><span class="hl-3">/**</span><br/><span class="hl-3"> * </span><span class="hl-4">@Description</span><span class="hl-3"> Funcion que verifica si existe un directorio con el nombre del usuario en la base de datos</span><br/><span class="hl-3"> * </span><span class="hl-4">@param</span><span class="hl-3"> </span><span class="hl-0">userNAme</span><span class="hl-3"> -- Nombre del usuario</span><br/><span class="hl-3"> * </span><span class="hl-4">@param</span><span class="hl-3"> </span><span class="hl-0">path</span><span class="hl-3"> -- Path donde se va a buscar el directorio</span><br/><span class="hl-3"> */</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">checkUserDirSync</span><span class="hl-1">(</span><span class="hl-0">userName</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">path</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">) : </span><span class="hl-7">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Leemos el directorio y almacenamos en una variable los archivos dentro de ella</span><br/><span class="hl-1">  </span><span class="hl-3">//? Tener en cuenta que pueden ser carpetas o archivos, para no olvidarme de manejar esto despues... </span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">pathDirectories</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">); </span><br/><br/><span class="hl-1">  </span><span class="hl-3">// variable booleana para retornar si existe o no el directorio</span><br/><span class="hl-1">  </span><span class="hl-3">//? lstatSync Mediante esta funcion podemos saber si es un directorio o un archivo, en caso de ser un archivo se retornara false</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">existDir</span><span class="hl-1"> = </span><span class="hl-0">pathDirectories</span><span class="hl-1">.</span><span class="hl-6">some</span><span class="hl-1">((</span><span class="hl-0">dir</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">dir</span><span class="hl-1"> === </span><span class="hl-0">userName</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">lstatSync</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">path</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">dir</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">).</span><span class="hl-6">isDirectory</span><span class="hl-1">()) </span><br/><br/><span class="hl-1">  </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-0">existDir</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">/**</span><br/><span class="hl-3"> * </span><span class="hl-4">@description</span><span class="hl-3"> Función que comprueba si el id del funko es unico</span><br/><span class="hl-3"> * </span><span class="hl-4">@param</span><span class="hl-3"> </span><span class="hl-0">path</span><span class="hl-3"> -- Path donde se va a crear el funko</span><br/><span class="hl-3"> */</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">getIds</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">:</span><span class="hl-7">string</span><span class="hl-1">): </span><span class="hl-7">number</span><span class="hl-1">[] {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">files</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">).</span><span class="hl-6">filter</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">file</span><span class="hl-1">.</span><span class="hl-6">endsWith</span><span class="hl-1">(</span><span class="hl-2">&#39;.json&#39;</span><span class="hl-1">)); </span><span class="hl-3">// nos aseguramos que los ficheros leidos son solo los .json, para curarme en salud</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">ids</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">[] = []; </span><span class="hl-3">// array donde almacenaremos los ids de los funkos del usuario</span><br/><br/><span class="hl-1">  </span><span class="hl-0">files</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">content</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">path</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">file</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">funkoData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-0">content</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-3">// console.log(funkoData.id);</span><br/><span class="hl-1">    </span><span class="hl-0">ids</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-0">funkoData</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// console.log(ids);</span><br/><span class="hl-1">  </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-0">ids</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">/**</span><br/><span class="hl-3"> * </span><span class="hl-4">@description</span><span class="hl-3"> Función que devuelve el valor de mercado del funko</span><br/><span class="hl-3"> * </span><span class="hl-4">@param</span><span class="hl-3"> </span><span class="hl-0">price</span><span class="hl-3"> -- Precio del funko</span><br/><span class="hl-3"> * </span><span class="hl-4">@returns</span><span class="hl-3"> -- Valor de mercado del funko</span><br/><span class="hl-3"> */</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">getMerchantValue</span><span class="hl-1">(</span><span class="hl-0">price</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">): </span><span class="hl-7">string</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">price</span><span class="hl-1"> &lt; </span><span class="hl-9">10</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-2">&quot;Low&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">price</span><span class="hl-1"> &gt;= </span><span class="hl-9">10</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">price</span><span class="hl-1"> &lt; </span><span class="hl-9">20</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-2">&quot;Medium&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">price</span><span class="hl-1"> &gt;= </span><span class="hl-9">20</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">price</span><span class="hl-1"> &lt; </span><span class="hl-9">50</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-2">&quot;High&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-2">&quot;Very High&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Ahora si, atendiendo a cada comando:</p>
<p>En primer lugar, el comando <em>add</em> al cual se le pasan como parámetros obligatorios todos los atributos mencionados anteriormente en la clase funko y se crea dentro del usuario &quot;conectado&quot; un fichero con extensión .json con esa información. Obivamente comprobando en un primer momento si ya existe un funko con la id que se está introduciendo por parámetro (como se puede ver <a href="#informe">aquí</a> el ID es único).</p>
<p>ADD -- Añadir un funko a la colección de un usuario</p>
<pre><code class="language-ts"><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">createNewFunko</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">user</span><span class="hl-1">:</span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">, </span><span class="hl-0">name</span><span class="hl-1">:</span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">des</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">type</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">genre</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">franchise</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">franchiseNum</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">, </span><span class="hl-0">exclusive</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">, </span><span class="hl-0">esCharacterist</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">price</span><span class="hl-1">:</span><span class="hl-7">number</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">newPath</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">path</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">user</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">// Primero comprobamos si hay ids repetidos en el fichero</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">ids</span><span class="hl-1"> = </span><span class="hl-6">getIds</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">ids</span><span class="hl-1">.</span><span class="hl-6">includes</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-0">black</span><span class="hl-1">.</span><span class="hl-0">bgRed</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-2">`Ya se encuentra un funko con el id </span><span class="hl-4">${</span><span class="hl-0">id</span><span class="hl-4">}</span><span class="hl-2"> y nombre </span><span class="hl-4">${</span><span class="hl-0">name</span><span class="hl-4">}</span><span class="hl-2"> en su base de datos`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-6">exit</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">typee</span><span class="hl-1"> = </span><span class="hl-0">type</span><span class="hl-1"> </span><span class="hl-5">as</span><span class="hl-1"> </span><span class="hl-7">Funko_type</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">// console.log(typee);</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">genree</span><span class="hl-1"> = </span><span class="hl-0">genre</span><span class="hl-1"> </span><span class="hl-5">as</span><span class="hl-1"> </span><span class="hl-7">Funko_genre</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">// console.log(genree);</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">funkopop</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Funko</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">name</span><span class="hl-1">, </span><span class="hl-0">des</span><span class="hl-1">, </span><span class="hl-0">typee</span><span class="hl-1">, </span><span class="hl-0">genree</span><span class="hl-1">, </span><span class="hl-0">franchise</span><span class="hl-1">, </span><span class="hl-0">franchiseNum</span><span class="hl-1">, </span><span class="hl-0">exclusive</span><span class="hl-1">, </span><span class="hl-0">esCharacterist</span><span class="hl-1">, </span><span class="hl-0">price</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">createJsonFunkoFile</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">, </span><span class="hl-0">funkopop</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>A continuación se creo el comando <em>remove</em> al cual se le pasa como parametro un usuario y una id, primero se comprueba que el usuario existe, en caso de no ser así se emite un mensaje de error, tras esto se comprueba si el ID que se pasa corresponde a un funko de la colección del usuario, de no ser así se emitiría un error y si se han superado estos filtros se finaliza eliminando el funko pop de la colección del usuario:</p>
<p>REMOVE -- Elimina un funko pop de la colección de un usuario:</p>
<pre><code class="language-ts"><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">removeFunko</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">user</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">newPath</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">path</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">user</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">ids</span><span class="hl-1"> = </span><span class="hl-6">getIds</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">ids</span><span class="hl-1">.</span><span class="hl-6">includes</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">files</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">).</span><span class="hl-6">filter</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">file</span><span class="hl-1">.</span><span class="hl-6">endsWith</span><span class="hl-1">(</span><span class="hl-2">&#39;.json&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-0">files</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">data</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">newPath</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">file</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-2">&#39;utf-8&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">jsonData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">jsonData</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1"> === </span><span class="hl-0">id</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">newpath_and_file</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">newPath</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">file</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">unlinkSync</span><span class="hl-1">(</span><span class="hl-0">newpath_and_file</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-2">&#39;No se ha encontrado el funko de id &#39;</span><span class="hl-1"> + </span><span class="hl-0">id</span><span class="hl-1"> + </span><span class="hl-2">&#39; en la coleccion de &#39;</span><span class="hl-1"> + </span><span class="hl-0">user</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-6">exit</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Tras este se desarrolló el comando <em>update</em> bastante similar al anterior en cuanto a parametros que se le pasan, sin embargo si se le pasa un usuario no registrado en la BBDD se lanza un mensaje de error en lugar de crearlo. Este comando modifica el contenido de un funko pop por los nuevos datos que se pasan como parámetro realizando una búsqueda a partir del ID que se introduce.</p>
<p>La modificación se realiza mediante las funciones llamadas en los comandos anteriores, primero se borra el pop y se crea de nuevo con los datos modificados.</p>
<p>UPDATE -- Actualizar datos de un funko pop</p>
<pre><code class="language-ts"><span class="hl-6">yargs</span><span class="hl-1">(</span><span class="hl-6">hideBin</span><span class="hl-1">(</span><span class="hl-0">process</span><span class="hl-1">.</span><span class="hl-0">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-6">command</span><span class="hl-1">(</span><span class="hl-2">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Modify funko content&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-0">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-3">// obligatorio</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko id&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">description:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko description&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">type:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko type&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">genre:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko genre&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">franchise:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko franchise&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">franchise_number:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko franchise number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">exclusive:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko exclusive&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">espCar:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko especial Caracteristics&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">price:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Funko price&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }, (</span><span class="hl-0">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">if</span><span class="hl-1">(</span><span class="hl-6">checkUserDirSync</span><span class="hl-1">(</span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">user</span><span class="hl-1">, </span><span class="hl-2">&#39;./database&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-6">removeFunko</span><span class="hl-1">(</span><span class="hl-2">&#39;./database&#39;</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">user</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-6">createNewFunko</span><span class="hl-1">(</span><span class="hl-2">&#39;./database&#39;</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">user</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">name</span><span class="hl-1">,</span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">description</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">genre</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">franchise</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">franchise_number</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">exclusive</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">espCar</span><span class="hl-1">, </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">price</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-6">bgGreen</span><span class="hl-1">(</span><span class="hl-2">&quot;Funko actualizado correctamente!&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      </span><span class="hl-6">exit</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-6">bgRed</span><span class="hl-1">(</span><span class="hl-2">&quot;No existe el usuario con el que esta intentando acceder en nuestra base de datos!&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      </span><span class="hl-6">exit</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span>
</code></pre>
<p>El cuarto comando desarrollado ha sido <em>list</em>, a este se le pasa como parametro solamente el usuario del cual se quiera saber su colección de funkos y muestra toda la información de cada uno de los funkos del usuario pasado por parámetro.</p>
<p>Mencionar que también se comprueba si el usuario esta registrado en la base de datos, en caso de no ser asi se muestra por consola un mensaje de error.</p>
<p>LIST -- Lista el contenido de cada funko de la colección de un usuario</p>
<pre><code class="language-ts"><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">listFunko</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">user</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">newPath</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">path</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">user</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">files</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">).</span><span class="hl-6">filter</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">file</span><span class="hl-1">.</span><span class="hl-6">endsWith</span><span class="hl-1">(</span><span class="hl-2">&#39;.json&#39;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  </span><span class="hl-0">files</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">data</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">newPath</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">file</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-2">&#39;utf-8&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">jsonData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">printJson</span><span class="hl-1">(</span><span class="hl-0">jsonData</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Por último se ha desarrollado el comando <em>read</em> al cual se le pasan por parámetro un usuario y un ID, de manera similar al anterior muestra el contenido de los funkos. En este caso solamente de aquel que coincida con la ID pasada por parámetro.</p>
<p>En este comando se realizan dos comprobaciones, en primer lugar si el usuario existe y en segundo lugar si dentro de la colección de dicho usuario hay un funko con la id que se pasa como parámetro, en cualquiera de los dos casos si no se cumple la condición se emite un mensaje de error notificando concretamente que ha fallado.</p>
<p>READ -- Muestra el contenido de un funko por su ID de la colección de un usuario.</p>
<pre><code class="language-ts"><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">findFunkoByID</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">user</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">newPath</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">path</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">user</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">ids</span><span class="hl-1"> = </span><span class="hl-6">getIds</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1">(</span><span class="hl-0">ids</span><span class="hl-1">.</span><span class="hl-6">includes</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">files</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-0">newPath</span><span class="hl-1">).</span><span class="hl-6">filter</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">file</span><span class="hl-1">.</span><span class="hl-6">endsWith</span><span class="hl-1">(</span><span class="hl-2">&#39;.json&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-0">files</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-0">file</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">data</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-4">${</span><span class="hl-0">newPath</span><span class="hl-4">}</span><span class="hl-2">/</span><span class="hl-4">${</span><span class="hl-0">file</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-2">&#39;utf-8&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">jsonData</span><span class="hl-1"> = </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-0">jsonData</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1"> === </span><span class="hl-0">id</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">printJson</span><span class="hl-1">(</span><span class="hl-0">jsonData</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-2">&#39;No se ha encontrado el funko de id &#39;</span><span class="hl-1"> + </span><span class="hl-0">id</span><span class="hl-1"> + </span><span class="hl-2">&#39; en la coleccion de &#39;</span><span class="hl-1"> + </span><span class="hl-0">user</span><span class="hl-1">));</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#3ejemplo-de-uso-de-la-aplicación" id="3ejemplo-de-uso-de-la-aplicación" style="color: inherit; text-decoration: none;">
  <h2><strong>3.Ejemplo de uso de la aplicación:</strong></h2>
</a>
<pre><code class="language-console"><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js add --user Adrian --id </span><span class="hl-9">3</span><span class="hl-1"> --name</span><span class="hl-2"> &quot;Black_Panther&quot;</span><span class="hl-1"> --description</span><span class="hl-2"> &quot;Pop de Black Panther&quot;</span><span class="hl-1"> --type</span><span class="hl-2"> &quot;Pop!&quot;</span><span class="hl-1"> --genre</span><span class="hl-2"> &quot;Film &amp; TV&quot;</span><span class="hl-1"> --franchise</span><span class="hl-2"> &quot;Marvel&quot;</span><span class="hl-1"> --franchise_number </span><span class="hl-9">5</span><span class="hl-1"> --exclusive </span><span class="hl-4">true</span><span class="hl-1"> --espCar</span><span class="hl-2"> &quot;Brilla y mueve la cabeza&quot;</span><span class="hl-1"> --price </span><span class="hl-9">45</span><span class="hl-1"> </span><br/><span class="hl-1">Funko </span><span class="hl-2">creado</span><span class="hl-1"> </span><span class="hl-2">correctamente</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js add --user Adrian --id </span><span class="hl-9">3</span><span class="hl-1"> --name</span><span class="hl-2"> &quot;Black_Panther&quot;</span><span class="hl-1"> --description</span><span class="hl-2"> &quot;Pop de Black Panther&quot;</span><span class="hl-1"> --type</span><span class="hl-2"> &quot;Pop!&quot;</span><span class="hl-1"> --genre</span><span class="hl-2"> &quot;Film &amp; TV&quot;</span><span class="hl-1"> --franchise</span><span class="hl-2"> &quot;Marvel&quot;</span><span class="hl-1"> --franchise_number </span><span class="hl-9">5</span><span class="hl-1"> --exclusive </span><span class="hl-4">true</span><span class="hl-1"> --espCar</span><span class="hl-2"> &quot;Brilla y mueve la cabeza&quot;</span><span class="hl-1"> --price </span><span class="hl-9">45</span><span class="hl-1"> </span><br/><span class="hl-1">Ya </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">encuentra</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1"> </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">nombre</span><span class="hl-1"> </span><span class="hl-2">Black_Panther</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">su</span><span class="hl-1"> </span><span class="hl-2">base</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">datos</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js list --user Eva</span><br/><span class="hl-1">--------------------------------</span><br/><span class="hl-1">id1</span><br/><span class="hl-1">nameDeku</span><br/><span class="hl-1">descriptionPersonaje </span><span class="hl-2">animado</span><br/><span class="hl-1">typePop!</span><br/><span class="hl-1">genreAnime</span><br/><span class="hl-1">franchiseMyHeroAcademy</span><br/><span class="hl-1">franchise_number1</span><br/><span class="hl-1">exclusivetrue</span><br/><span class="hl-1">especialCaracteristicsbrilla</span><br/><span class="hl-1">price15</span><br/><span class="hl-1">--------------------------------</span><br/><span class="hl-1">--------------------------------</span><br/><span class="hl-1">id2</span><br/><span class="hl-1">nameUrabity</span><br/><span class="hl-1">descriptionPersonaje </span><span class="hl-2">animado</span><br/><span class="hl-1">typePop!</span><br/><span class="hl-1">genreAnime</span><br/><span class="hl-1">franchiseMyHeroAcademy</span><br/><span class="hl-1">franchise_number20</span><br/><span class="hl-1">exclusivetrue</span><br/><span class="hl-1">especialCaracteristicsbrilla</span><br/><span class="hl-1">price15</span><br/><span class="hl-1">--------------------------------</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js update --user Adrian --id </span><span class="hl-9">3</span><span class="hl-1"> --name</span><span class="hl-2"> &quot;Black_Panther&quot;</span><span class="hl-1"> --description</span><span class="hl-2"> &quot;Pop de Black Panther de la pelicula Civil Warr&quot;</span><span class="hl-1"> --type</span><span class="hl-2"> &quot;Pop!&quot;</span><span class="hl-1"> --genre</span><span class="hl-2"> &quot;Film &amp; TV&quot;</span><span class="hl-1"> --franchise</span><span class="hl-2"> &quot;Marvel&quot;</span><span class="hl-1"> --franchise_number </span><span class="hl-9">1</span><span class="hl-1"> --exclusive </span><span class="hl-4">false</span><span class="hl-1"> --espCar</span><span class="hl-2"> &quot;Brilla&quot;</span><span class="hl-1"> --price </span><span class="hl-9">23</span><span class="hl-1"> </span><br/><span class="hl-1">Funko </span><span class="hl-2">actualizado</span><span class="hl-1"> </span><span class="hl-2">correctamente!</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js update --user Adrian --id </span><span class="hl-9">4</span><span class="hl-1"> --name</span><span class="hl-2"> &quot;Black_Panther&quot;</span><span class="hl-1"> --description</span><span class="hl-2"> &quot;Pop de Black Panther de la pelicula Civil Warr&quot;</span><span class="hl-1"> --type</span><span class="hl-2"> &quot;Pop!&quot;</span><span class="hl-1"> --genre</span><span class="hl-2"> &quot;Film &amp; TV&quot;</span><span class="hl-1"> --franchise</span><span class="hl-2"> &quot;Marvel&quot;</span><span class="hl-1"> --franchise_number </span><span class="hl-9">1</span><span class="hl-1"> --exclusive </span><span class="hl-4">false</span><span class="hl-1"> --espCar</span><span class="hl-2"> &quot;Brilla&quot;</span><span class="hl-1"> --price </span><span class="hl-9">23</span><span class="hl-1"> </span><br/><span class="hl-1">No </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">ha</span><span class="hl-1"> </span><span class="hl-2">encontrado</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-9">4</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">coleccion</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">Adrian</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js read --user Adrian --id </span><span class="hl-9">1</span><br/><span class="hl-1">--------------------------------</span><br/><span class="hl-1">id1</span><br/><span class="hl-1">nameJohn_Nieve</span><br/><span class="hl-1">descriptionJhon </span><span class="hl-2">nieve</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">casa</span><span class="hl-1"> </span><span class="hl-2">Stark</span><br/><span class="hl-1">typePop!</span><br/><span class="hl-1">genreAnime</span><br/><span class="hl-1">franchiseGoT</span><br/><span class="hl-1">franchise_number2</span><br/><span class="hl-1">exclusivefalse</span><br/><span class="hl-1">especialCaracteristicsBRILLA</span><br/><span class="hl-1">price120</span><br/><span class="hl-1">--------------------------------</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js read --user Adrian --id </span><span class="hl-9">5</span><br/><span class="hl-1">No </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">ha</span><span class="hl-1"> </span><span class="hl-2">encontrado</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-9">5</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">coleccion</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">Adrian</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js remove --user Eva --id </span><span class="hl-9">3</span><br/><span class="hl-1">Se </span><span class="hl-2">ha</span><span class="hl-1"> </span><span class="hl-2">removido</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">exito</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">coleccion</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">Eva</span><br/><br/><span class="hl-0">$node</span><span class="hl-1"> ./dist/Funko/funko-app.js remove --user Eva --id </span><span class="hl-9">3</span><br/><span class="hl-1">No </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">ha</span><span class="hl-1"> </span><span class="hl-2">encontrado</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">coleccion</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">Eva</span><br/>
</code></pre>

<a href="#4dificultadesreflexión" id="4dificultadesreflexión" style="color: inherit; text-decoration: none;">
  <h2><strong>4.Dificultades/Reflexión</strong></h2>
</a>
<p>No ha sido una práctica realmente dificil en cuanto al desarrollo de la aplicación. Considero que es una de las prácticas mas entretenidas de la asignatura hasta la fecha.</p>
<p>Las únicas dificultades que tuve fueron en cuanto a la coexistencia de commonJS y el módulo ESM cuya solución quedo reflejada en el <a href="#coexistencia-esm-y-commonjs">apartado 2</a>.</p>

<a href="#5referencias" id="5referencias" style="color: inherit; text-decoration: none;">
  <h2><strong>5.Referencias</strong></h2>
</a>
<p><a href="https://ull-esit-inf-dsi-2223.github.io/nodejs-theory/">Apuntes bloque 2 de la asignatura</a>
<a href="https://ull-esit-inf-dsi-2223.github.io/prct09-filesystem-funko-app/">GFuion de la práctica</a>
<a href="https://coveralls.io/">Coveralls</a>
<a href="https://sonarcloud.io/explore/projects">SonarCloud</a>
<a href="https://nodejs.org/docs/latest-v19.x/api/fs.html">Documentación NODE.js</a>
<a href="https://www.npmjs.com/package/yargs">Doc yargs</a>
<a href="https://www.npmjs.com/package/chalk">Doc chalk</a></p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">PR09</a>
<ul>
<li class="tsd-kind-module"><a href="modules/Funko_funko_app.html">Funko/funko-<wbr/>app</a></li>
<li class="tsd-kind-module"><a href="modules/Funko_funkoClass.html">Funko/funko<wbr/>Class</a></li>
<li class="tsd-kind-module"><a href="modules/Funko_manageFunction.html">Funko/manage<wbr/>Function</a></li>
<li class="tsd-kind-module"><a href="modules/Funko_types.html">Funko/types</a></li>
<li class="tsd-kind-module"><a href="modules/Funko_utilities.html">Funko/utilities</a></li>
<li class="tsd-kind-module"><a href="modules/pe102_addMapReduce.html">pe102/add<wbr/>Map<wbr/>Reduce</a></li>
<li class="tsd-kind-module"><a href="modules/pe102_divMapReduce.html">pe102/div<wbr/>Map<wbr/>Reduce</a></li>
<li class="tsd-kind-module"><a href="modules/pe102_mapReduceClass.html">pe102/map<wbr/>Reduce<wbr/>Class</a></li>
<li class="tsd-kind-module"><a href="modules/pe102_multMapReduce.html">pe102/mult<wbr/>Map<wbr/>Reduce</a></li>
<li class="tsd-kind-module"><a href="modules/pe102_subMapReduce.html">pe102/sub<wbr/>Map<wbr/>Reduce</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>